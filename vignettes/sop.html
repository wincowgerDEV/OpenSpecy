<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2021-03-18" />

<title>Standard Operating Procedure</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Standard Operating Procedure</h1>
<h4 class="author"><p>Jessica Meyers, Jeremy Conkle, Win Cowger, Andrew Gray, Chelsea Rochman Sebastian Primpke, Jennifer Lynch, Hannah Hapich, Hannah De Frond, Keenan Munno, Bridget O’Donnell</p></h4>
<h4 class="date">2021-03-18</h4>



<div id="outline" class="section level2">
<h2>Outline</h2>
<p>Open Specy is a tool for viewing, processing, sharing, and identifying Raman and (FT)IR spectra. This document outlines a common workflow for using Open Specy and highlights some topics that users are often requesting a tutorial on. If the document is followed sequentially from beginning to end, the user will have a better understanding of every procedure involved in using Open Specy as a tool for interpreting spectra. It takes approximately 45 minutes to read through and follow along with this standard operating procedure the first time. Afterward, knowledgeable users should be able to thoroughly analyze individual spectra at an average speed of 1 per minute.</p>
</div>
<div id="getting-started" class="section level2">
<h2>Getting started</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(OpenSpecy)</span></code></pre></div>
</div>
<div id="viewing-and-sharing-spectra" class="section level2">
<h2>Viewing and Sharing Spectra</h2>
<p>To get started with Open Specy, access <a href="http://www.openspecy.org">www.openspecy.org</a> or start the Shiny GUI directly from R typing</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run_app</span>()</span></code></pre></div>
<p>Then click the <em>Upload File</em> tab at the top of the page: <!-- ![](images/image3.png){style="width: 100%"} --></p>
</div>
<div id="download-a-test-dataset" class="section level2">
<h2>Download a test dataset</h2>
<!-- ## [![](images/image3.png)]{style="width: 175.14px"} -->
<p>If you don’t have your own data to use right away, that is ok. You can download test data to try out the tool by clicking on the test data button. A csv file of HDPE Raman spectrum will download on your computer. This file can also be used as a template for formatting CSV data into an Open Specy accepted format.</p>
</div>
<div id="choose-whether-to-share-your-uploaded-data-or-not" class="section level2">
<h2>Choose whether to share your uploaded data or not</h2>
<!-- [![](images/image3.png)]{style="width: 241.72px"} -->
<p>[efore uploading, indicate if you would like to share the uploaded data or not using the drop down. If “Share” is selected, any data uploaded to the tool will automatically be saved in an open access drive with a CC-BY 4.0 license and will be available for researchers and other ventures to use to improve spectral analysis, build machine learning tools, etc. Some users may choose not to share if they need to keep their data private. If “Not Now” is selected, none of the uploaded data will be stored or shared in Open Specy.</p>
</div>
<div id="upload-data" class="section level2">
<h2>Upload data</h2>
<!-- [![](images/image3.png)]{style="width: 267.88px"} -->
<p>Open Specy allows for upload of .csv, .jdx, .0, .spc, .spa, and other file types. .csv files will always load correctly but the other file types are still in beta development, though most of the time these files work perfectly. It is best practice to cross check non-.csv files in the proprietary software they came from and Open Specy before use in Open Specy. Due to the complexity of these file types, we haven’t been able to make them fully compatible yet. If your file is not working, please contact the administrator and share the file so that we can get it to work.</p>
<p>For the most consistent results, files should be converted to .csv format before uploading to Open Specy. The specific steps to converting your instrument’s native files to .csv can be found in its software manual or you can check out [<a href="https://www.google.com/url?q=https://www.effemm2.de/spectragryph/&amp;sa=D&amp;source=editors&amp;ust=1616072638052000&amp;usg=AOvVaw2H-GJzZfEy7EZ79blYTXgR">Spectragryph</a>], which supports many spectral file conversions (see Mini Tutorial section: File conversion in Spectragryph to Open Specy accepted format).</p>
<p>If uploading a csv file, label the column with the wavelengths “Wavelength” and name the column with the intensities “Absorbance”. Wavelength units must be 1/cm. Any other columns are not used by the software. If you are uploading a reflectance or transmission spectrum, you will still label the intensity units as Absorbance. Always keep a copy of the original file before alteration to preserve metadata and raw data for your records</p>
<!-- [![](images/image19.png)]{style="width: 100.47px"} -->
<p>To upload data, click Browse and choose one of your files to upload, or drag and drop your file into the gray box. At this time you can only upload one file at a time. Upon upload and throughout the analysis, intensity values are min-max normalized (Equation 1).</p>
<p>Equation 1: Max-Min Normalization <!-- ![](images/image1.png) --></p>
<p>Viewing Spectra Plot</p>
<!-- [![](images/image3.png)]{style="width: 415.00px"} -->
<p>After data is uploaded, it will appear in the main window. This plot is selectable, zoomable, and provides information on hover. You can also save a png file of the plot view using the camera icon at the top when you hover over the plot. This plot will change the view based on updates from the Adjusting Intensity Units selection.</p>
</div>
<div id="adjusting-intensity-units" class="section level2">
<h2>Adjusting Intensity Units</h2>
<!-- [![](images/image3.png)]{style="width: 236.72px"} -->
<p>Open Specy assumes that intensity units are in absorbance units but Open Specy can adjust reflectance or transmittance spectra to absorbance units using this drop down in the upload file tab. The transmittance adjustment uses the log10(1/T) calculation which does not correct for system or particle characteristics. The reflectance adjustment use s the Kubelka-Munk equation (1-R)2]/(2*R). If none is selected, Open Specy assumes that the uploaded data is an absorbance spectrum and does not apply an adjustment.</p>
</div>
<div id="share-metadata-on-known-spectra" class="section level2">
<h2>Share metadata on known spectra</h2>
<!-- [![](images/image18.png)]{style="width: 137.00px"} -->
<p>When sharing data, please provide as much metadata as you can. Metadata helps make shared data as useful as possible. Metadata inputs each have examples provided in the input. The examples disappear when the box is clicked and will not be saved if nothing is input by the user. Mandatory inputs are marked with a red star. If these inputs are not filled, the data will be considered uninterpretable and will be discarded. Inputs left blank will be left blank in the metadata sheet and interpreted as “unknown” or “not applicable”. To share metadata, click the share data button at the bottom of the metadata inputs.</p>
<!-- [![](images/image4.png)]{style="width: 133.00px"} -->
<p>[When the user clicks the share data button their current uploaded data and metadata is sent to an <a href="https://www.google.com/url?q=https://www.dropbox.com/sh/vibzoiq1i4o5usp/AAAe50RJhnvt6NoMDAJZ1CY8a?dl%3D0&amp;sa=D&amp;source=editors&amp;ust=1616072638058000&amp;usg=AOvVaw10FaY1OVqJbCMuruQQhErv">open-access online repository</a>. All inputs from the metadata (described below) are input to a metadata sheet followed by any inputs on the smoother and baseline correction page and ending with the date stamp. The metadata sheet is given the same unique name as the data, but it ends with “_form”. The exact same data is saved as would be downloaded using the download data button (described below). All high quality uploaded data with metadata will eventually be reviewed by spectroscopy experts and added to the internal library if it passes review. If multiple files are going to be uploaded with metadata, the cells will also stay filled with the last input after the share data button is clicked. Just upload the next dataset and change the metadata inputs that are different. If more than 50 files will be shared at once, you can contact the website administrator to get a bulk upload sheet for more rapid upload.</p>
</div>
<div id="preprocessing" class="section level1">
<h1>Preprocessing</h1>
<p>After uploading data, you can preprocess the data using baseline correction, smoothing, and range selection and save your preprocessed data. Go to the Preprocess Spectrum tab to select your parameters for processing the spectrum.</p>
<!-- [![](images/image9.png)]{style="width: 624.00px"} -->
<div id="preprocess-spectra-plot" class="section level2">
<h2>Preprocess Spectra Plot</h2>
<!-- [![](images/image9.png)]{style="width: 521.00px"} -->
<p>The preprocess spectra plot shows the uploaded spectra in comparison to the processed spectra that has been processed using the processing inputs on the page. It will automatically update with any new slider inputs. This allows the user to tune the inputs to optimize the signal to noise ratio. The goal with preprocessing is to make peak regions have high intensities and nonpeak regions should have low intensities.</p>
</div>
<div id="smoothing-polynomial" class="section level2">
<h2>Smoothing Polynomial</h2>
<!-- [![](images/image16.jpg)]{style="width: 300.00px"} -->
<p>The first step of the Open Specy preprocessing routing is spectral smoothing. The goal of this function is to increase the signal to noise ratio (S/N) without distorting the shape or relative size of the peaks. The value on the slider is the polynomial order of the Savitzky-Golay (SG) filter ([<a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Savitzky%25E2%2580%2593Golay_filter&amp;sa=D&amp;source=editors&amp;ust=1616072638060000&amp;usg=AOvVaw1fw5RekZW44iGlJ662zseM">https://en.wikipedia.org/wiki/Savitzky%E2%80%93Golay_filter</a>, <a href="https://pubs.acs.org/doi/abs/10.1021/ac60214a047" class="uri">https://pubs.acs.org/doi/abs/10.1021/ac60214a047</a>). The SG filter is fit to a moving window of 11 data points where the center point in the window is replaced with the polynomial estimate. The number of data points in the window is not user adjustable. Higher numbers lead to more wiggly fits and thus less smooth, lower numbers lead to more smooth fits, a 7th order polynomial will make the spectrum have almost no smoothing. If smoothing is set to 0 then no smoothing is conducted on the spectrum. When smoothing is done well, peak shapes and relative heights should not change. Typically a 3rd order polynomial (3 on the slider) works to increase the signal to noise without distortion, but if the spectrum is noisy, decrease polynomial order and if it is already smooth, increase the polynomial order to the maximum (7). Examples of smoothing below.</p>
<!-- [![](images/image10.png)]{style="width: 291.84px"} -->
<p>Cowger et al. 2020</p>
</div>
<div id="baseline-correction-polynomial" class="section level2">
<h2>Baseline Correction Polynomial</h2>
<!-- [![](images/image11.jpg)]{style="width: 304.00px"} -->
<p>The second step of Open Specy’s preprocessing routine is baseline correction. The goal of baseline correction is to get all non-peak regions of the spectra to 0 Absorbance. The higher the polynomial order, the more wiggly the fit to the baseline. If the baseline is not very wiggly, a more wiggly fit could remove peaks which is not desired. The baseline correction algorithm used in Open Specy is called “I-ModPolyfit” (<a href="https://www.google.com/url?q=https://paperpile.com/shared/BdMxHw&amp;sa=D&amp;source=editors&amp;ust=1616072638062000&amp;usg=AOvVaw1TxQwsOEQx3o-RAnIdLAsc">Zhao et al. 2007</a>). This algorithm iteratively fits polynomial equations of the specified order to the whole spectrum. During the first fit iteration, peak regions will often be above the baseline fit. The data in the peak region is removed from the fit to make sure that the baseline is less likely to fit to the peaks. The iterative fitting terminates once the difference between the new and previous fit is small. An example of a good baseline fit below.</p>
<!-- [![](images/image7.png)]{style="width: 249.00px"} -->
<ol style="list-style-type: lower-alpha">
<li>A Raman spectrum of polypropylene. Note that baseline increases gradually toward the high Raman shift. (b) The baseline is fitted with a sixth-order polynomial curve. (c) The baseline corrected spectrum of polypropylene. Cowger et al. 2020.</li>
</ol>
</div>
<div id="spectral-range" class="section level2">
<h2>Spectral Range</h2>
<!-- [![](images/image9.png)]{style="width: 233.70px"} -->
<p>The final step of preprocessing is restricting the spectral range. Sometimes the instrument operates with high noise at the ends of the spectrum and sometimes the baseline fit can produce distortions at the ends of the spectrum, both can be removed using this routine. You should look into the signal to noise ratio of your specific instrument by wavelength to determine what wavelength ranges to use. Distortions due to baseline fit can be assessed from looking at the preprocess spectra plot. Additionally, you can restrict the range to examine a single peak or a subset of peaks of interests. This function allows users to isolate peaks of interest for matching, while removing noise and influence from less relevant spectral data.</p>
</div>
<div id="download-data" class="section level2">
<h2>Download Data</h2>
<!-- [![](images/image15.jpg)]{style="width: 187.00px"} -->
<p>After you have the preprocessing parameters set, we recommend that you download the preprocessed data for your records. The download data button will append the uploaded data to three columns created by the preprocessing parameters. “Wavelength” and “Absorbance” are columns from the data uploaded by the user. “NormalizedIntensity” is the max-min normalized value (Eqn. 1) of the “Absorbance”. “Smoothed” is the Savitzky-Golay filter specified by the slider explained above. “BaselineRemoved” is the smoothed and baseline corrected value that is visible on the center plot.</p>
</div>
</div>
<div id="matching" class="section level1">
<h1>Matching</h1>
<p>After uploading data and preprocessing it (if desired) you can now identify the spectrum. To identify the spectrum go to the “Match Spectrum” tab.</p>
<!-- [![](images/image5.png)]{style="width: 624.00px"} -->
<p>You will see your spectrum and the top matches, but before looking at matches, you need to check the three selectable parameters below.</p>
<div id="spectrum-type" class="section level2">
<h2>Spectrum Type</h2>
<!-- [![](images/image5.png)]{style="width: 307.16px"} -->
<p>The spectra type input on the “Match spectra” tab specifies the type of spectra (Raman or FTIR) that the user has uploaded and wants to match to. This input will tell the website whether to use the FTIR library or the Raman library to make the match.</p>
</div>
<div id="spectrum-to-analyze" class="section level2">
<h2>Spectrum To Analyze</h2>
<!-- [![](images/image5.png)]{style="width: 272.97px"} -->
<p>The spectra to analyze input specifies if the tool will match the “Uploaded” spectra (unaltered by the inputs on the Preprocess Spectra Tab) or the “Processed” spectra (manipulated by the inputs in the Preprocess Spectra Tab).</p>
</div>
<div id="region-to-match" class="section level2">
<h2>Region To Match</h2>
<!-- [![](images/image5.png)]{style="width: 220.49px"} -->
<p>The region to match input specifies if the “Full Spectrum” will match the entire range of the spectra (including non peak regions) in the reference database. This is the most intuitive match. Or should the “Peaks Only” match just the peak regions in the reference database. This is an advanced feature proposed in <a href="https://www.google.com/url?q=https://paperpile.com/shared/2nJXJF&amp;sa=D&amp;source=editors&amp;ust=1616072638066000&amp;usg=AOvVaw0_xARaOY_JGa7KMzmO9qp1">Renner et al. 2017</a> This can be a less intuitive approach but in cases where there are few peaks and high baseline interference, it could be the best option. In cases where non-peak regions are important for the interpretation of the match, this is not the best approach.</p>
</div>
<div id="match-table" class="section level2">
<h2>Match Table</h2>
<!-- [![](images/image5.png)]{style="width: 231.01px"} -->
<p>The selectable table shows the top material matches returned by the tool, their Pearson’s r value, and the Organization they were provided by. When rows are selected their spectra are added to the match plot. The spectrum being matched and reference library are determined by the previously mentioned parameters. During the matching process, one final cleaning step happens using a simple minimum subtraction algorithm (Equation 2) which in many cases will allow unprocessed spectra to remove subtle baseline, but will not harm the spectra which has no baseline. Then, these aligned data are tested for correlation using the Pearson’s r. The Pearson’s r is used as a match quality indicator and the spectra from the top 1000 best matches are returned from the library. You can restrict the libraries which are displayed in the table by clicking the box that says “All” under the Organization column. Similarly you can restrict the range of Pearson&#39;s r values or search for specific material types.</p>
<p>Equation 2: Minimum Subtraction <!-- ![](images/image2.png) --></p>
</div>
<div id="selection-metadata" class="section level2">
<h2>Selection Metadata</h2>
<!-- [![](images/image5.png)]{style="width: 535.80px"} -->
<p>Whatever match is selected from the match table may have additional metadata about it. That metadata will be displayed below the plot. Some of this metadata may assist you in interpreting the spectra. For example, if the spectra has metadata which says it is a liquid and you are analyzing a solid particle, that spectrum may not be the best match.</p>
</div>
<div id="match-plot" class="section level2">
<h2>Match Plot</h2>
<!-- [![](images/image5.png)]{style="width: 515.54px"} -->
<p>This plot is dynamically updated by selecting matches from the match table. The red spectrum is the spectrum that you selected from the reference library and the white spectrum is the spectrum that you are trying to identify. Whenever a new dataset is uploaded, the plot and data table in this tab will be updated. These plots can be saved as a .png by clicking the camera button at the top of the plot.</p>
</div>
<div id="how-to-interpret-the-reported-matches" class="section level2">
<h2>How to interpret the reported matches</h2>
<p>There are several important things to consider when interpreting a spectral match including the library source, the Pearson’s r, and other metrics.</p>
<div id="the-library-source" class="section level3">
<h3>The library source</h3>
<p>When you click on a spectrum, all of the metadata that we have in Open Specy about that source will be displayed in a metadata window below to the matches table. Each library has different methodologies used to develop it. It is useful to read up on the library sources from the literature that they came from. E.g. Chabuka et al. 2020 focuses on weathered plastics, so matching to it may suggest that your spectrum is of a weathered polymer. Primpke et al. 2018 only has a spectral range up to 2000, so some polymers may be difficult to differentiate with it. Make sure to cite the libraries that you use during your search when you publish your results. The authors were kind enough to make their data open access so that it could be used in Open Specy and we should return the favor by citing them.</p>
</div>
<div id="pearsons-r" class="section level3">
<h3>Pearson’s r</h3>
<p>Correlation values are used to identify the closest matches available in the current Open Specy spectral libraries to improve material identification and reduce sample processing times. Pearson’s r values range from 0 - 1 with 0 being a completely different spectrum and 1 being an exact match. Some general guidelines that we have observed from using Open Specy. If no matches are &gt; ~0.3 the material may require additional processing or may not exist in the Open Specy library. Correlation values are not the only metric you should use to assess your spectra’s match to a material in the library, matches need to make sense.</p>
</div>
<div id="things-to-consider-beyond-correlation" class="section level3">
<h3>Things to consider beyond correlation</h3>
<p>Peak position and height similarities are more important than correlation and need to be assessed manually. Peak position correlates with specific bond types. Peak height correlates to the concentration of a compound. Therefore, peak height and peak position should match as closely as possible to the matched spectrum. When there are peaks that exist in the spectra you are trying to interpret that do not exist in the match, there may be additional materials to identify. In this case, restrict the preprocessing range to just the unidentified peak and try to identify it as an additional component.</p>
<!-- [![](images/image14.png)]{style="width: 397.50px"} -->
<p>[<a href="https://www.google.com/url?q=https://www.compoundchem.com/2015/02/05/irspectroscopy/&amp;sa=D&amp;source=editors&amp;ust=1616072638073000&amp;usg=AOvVaw0OB5PjQTf3s2hyIcFnnT-i">https://www.compoundchem.com/2015/02/05/irspectroscopy/</a></p>
<p>Also, check the match metadata to see if the match makes sense. Example: A single fiber cannot be a “cotton blend” since there would be no other fibers to make up the rest of the blend. Example: Cellophane does not degrade into fibers, so a match for a fiber to cellophane wouldn’t make sense. Example: You are analyzing a particle at room temperature, but the matched material is liquid at room temperature. The material may be a component of the particle but it cannot be the whole particle.</p>
</div>
<div id="how-specific-do-you-need-to-be-in-the-material-type-of-the-match" class="section level3">
<h3>How specific do you need to be in the material type of the match?</h3>
<p>You can choose to be specific about how you classify a substance (e.g. polyester, cellophane) or more general (e.g. synthetic, semi-synthetic, natural, etc.). The choice depends on your research question. Using more general groups can speed up analysis time but will decrease the information you have for interpretation. To identify materials more generally, you can often clump the identities provided by Open Specy to suit your needs. For example, matches to “polyester” and “polypropylene” could be clumped to the category “plastic”.</p>
</div>
<div id="how-to-differentiate-between-similar-spectra-figures-courtesy-of-bridget-odonnell-from-horiba-scientific" class="section level3">
<h3>How to differentiate between similar spectra? (Figures Courtesy of Bridget O&#39;Donnell from Horiba Scientific)</h3>
<p>One common challenge is differentiating between LDPE and HDPE. But, even with a low resolution instrument (MacroRAM, 2 cm-1/pixel), you can still see some differences. From a wide view, these low, medium, and high density PE samples all look relatively similar:</p>
<!-- [![](images/image23.png)]{style="width: 620.60px"} -->
<p>But, a closer look at the 1450 cm-1 band reveals clear differences:</p>
<!-- [![](images/image13.png)]{style="width: 616.57px"} -->
<p>When you overlay them, you start to see differences in other spectral regions too:</p>
<!-- [![](images/image12.png)]{style="width: 624.00px"} -->
<p>[So, the question is, how do we deal with samples that are very similar with only subtle differences? Usually, researchers will use MVA techniques after they’ve collected multiple reference spectra of known samples (LDPE and HDPE in this case). They can then develop models and apply them to distinguish between different types of PE. With a reference database like Open Specy, this is complicated by the fact that researchers are measuring samples on different instruments with correspondingly different spectral responses and spectral resolutions. That makes it even more difficult to accurately match definitively to LDPE and HDPE as opposed to generic ‘PE’.</p>
<p>One possibility is to place more emphasis (from a computational perspective) on the bands that show the most difference (the triplet at 1450 cm-1) by restricting the range used to match in Open Specy.</p>
<p>The other, much simpler option is to just match any PE hit to generic ‘PE’ and not specifically HDPE or LDPE.</p>
<p>Another challenge is in differentiating between types of nylons. But, Raman has a pretty easy time distinguishing nylons. These spectra were recorded of a series of nylons and the differences are much more distinguishable compared to the PE results above (nylon 6, 6-6, 6-9, 6-10, and 6-12 top to bottom): <!-- [![](images/image21.png)]{style="width: 584.61px"} --></p>
<p>The differences are even more pronounced when you overlay the spectra:</p>
<!-- [![](images/image6.png)]{style="width: 542.20px"} -->
</div>
<div id="what-to-do-when-matches-arent-making-sense" class="section level3">
<h3>What to do when matches aren’t making sense</h3>
<ol style="list-style-type: decimal">
<li>Double check that the baseline correction and smoothing parameters result in the best preprocessing of the data.</li>
<li>Try reprocessing your spectrum, but limit it to specific peak regions with a higher signal to noise ratio.</li>
<li>Restrict the spectral range to include or exclude questionable peaks or peaks that were not present in the previous matches.</li>
<li>Restrict the spectral range to exclude things like CO₂ (2200 cm⁻¹) or H₂O (~1600 cm⁻¹) in spikes in the IR spectrum.</li>
<li>If nothing above works to determine a quality match, you may need to measure the spectrum of your material again or use another spectral analysis tool.</li>
</ol>
</div>
</div>
</div>
<div id="mini-tutorials" class="section level1">
<h1>Mini Tutorials</h1>
<div id="file-conversion-in-spectragryph-to-open-specy-accepted-format" class="section level2">
<h2>File Conversion in SpectraGryph to Open Specy accepted format</h2>
<ol style="list-style-type: decimal">
<li>Download Spectragryph</li>
</ol>
<p><a href="https://www.google.com/url?q=https://www.effemm2.de/spectragryph/down.html&amp;sa=D&amp;source=editors&amp;ust=1616072638079000&amp;usg=AOvVaw24d2-Do_oAvlvpiJV7mpyL">https://www.effemm2.de/spectragryph/down.html</a></p>
<ol start="2" style="list-style-type: decimal">
<li>Open Spectragryph and upload your file by dragging and dropping it into the console.</li>
</ol>
<!-- [![](images/image17.png)]{style="width: 624.00px"} -->
<ol start="3" style="list-style-type: decimal">
<li>Click File, Save/export data, save data as, and save it as an spc file.</li>
</ol>
<!-- [![](images/image8.png)]{style="width: 624.00px"} -->
<ol start="4" style="list-style-type: decimal">
<li>Then upload that SPC file to Open Specy.</li>
</ol>
<!-- [![](images/image20.png)]{style="width: 624.00px"} -->
</div>
<div id="conceptual-diagram-of-data-flow-through-open-specy" class="section level2">
<h2>Conceptual diagram of data flow through Open Specy</h2>
<!-- [![](images/image22.png)]{style="width: 589.35px"} -->
</div>
<div id="references" class="section level2">
<h2>References:</h2>
<p>Cowger, W., Gray, A., Christiansen, S. H., De Frond, H., Deshpande, A., Hermabessiere, L., Lee, E., Mill, L., Munno, K., Ossmann, B., &amp; Others. (2020). EXPRESS: Critical Review of Processing and Classification Techniques for Images and Spectra in Microplastic Research. Applied Spectroscopy, 0003702820929064.</p>
<p>Chabuka, B. K., &amp; Kalivas, J. H. (2020). Application of a Hybrid Fusion Classification Process for Identification of Microplastics Based on Fourier Transform Infrared Spectroscopy. Applied Spectroscopy, 74(9), 1167–1183.</p>
<p>Primpke, S., Wirth, M., Lorenz, C., &amp; Gerdts, G. (2018). Reference database design for the automated analysis of microplastic samples based on Fourier transform infrared (FTIR) spectroscopy. Analytical and Bioanalytical Chemistry. [<a href="https://www.google.com/url?q=https://doi.org/10.1007/s00216-018-1156-x&amp;sa=D&amp;source=editors&amp;ust=1616072638082000&amp;usg=AOvVaw0TdyCl-hwArATY52caQaZF">https://doi.org/10.1007/s00216-018-1156-x</a></p>
<p>Savitzky, A., &amp; Golay, M. J. E. (1964). Smoothing and Differentiation of Data by Simplified Least Squares Procedures. Analytical Chemistry, 36(8), 1627–1639.</p>
<p>Zhao, J., Lui, H., McLean, D. I., &amp; Zeng, H. (2007). Automated autofluorescence background subtraction algorithm for biomedical Raman spectroscopy. Applied Spectroscopy, 61(11), 1225–1232.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
